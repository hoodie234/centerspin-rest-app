<html>
    
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    </head>
    
    <body>
        
        <h2 id="title"></h2>
        <br>
        <div id="description"></div>
        <br>
        <div id="source"></div>
        
        <input type="text" id="contentRating" value="3">
        <input type="text" id="analysisRating" value="4">
        <input type="text" id="contextRating" value="2">
        
        <button id="submitVote">Submit Vote</button>
        <script>
            
            
            
            var getQueryVars = function() {
                var vars = [], hash;
                var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
                for(var i = 0; i < hashes.length; i++)
                {
                    hash = hashes[i].split('=');
                    vars[hash[0]] = hash[1];
                }
                return vars;
            };
            
            var queryParams = getQueryVars();
            var id = queryParams.id;
            
            $.get("api/content/articles/" + id, function(response) {
                var articleData = response;
               $("#title").text(articleData.title);
               $("#description").text(articleData.description);
               $("#source").text(articleData.source);
            });
            
            
            $("#submitVote").click(function() {
                
                var biasMetricData = {
                    contentRating : $("#contentRating").val(),
                        analysisRating : $("#analysisRating").val(),
                        contextRating : $("#contextRating").val()
                };
                var voteRequest = {
                    
                    articleID : id,
                    biasMetrics : biasMetricData
                };
                
                $.post("api/submit/vote", JSON.stringify(voteRequest), function(response) {
                    console.log(response);
                });
            });
            
            
            
        </script>
    </body>
    
</html>
